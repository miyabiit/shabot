<!-- Scaffolding generated by Casein v5.1.1.5 -->

<% if @form.errors.present? -%>
  <div class="alert alert-danger" role="alert">
    定例データ一括作成に失敗しました
    <ul>
    <% @form.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end -%>

<h2><%= ReceiptHeader.model_name.human %> <%= casein_pagination_details @receipt_headers %></h2>
<%= form_for @form, as: :q, url: casein_receipt_headers_path, method: :get do |f| %>
  <div class="row">
    <div class="col-lg-2">
      伝票No
      <%= f.text_field :id, size: 10 %>
    </div>
    <div class="col-lg-3">
      入金元
      <%= f.text_field :account_name %>
    </div>
    <div class="col-lg-4">
      日付
      <%= f.text_field :from, placeholder: 'yyyy/mm/dd', "data-provide" => "datepicker", size: 12 %>
      〜
      <%= f.text_field :to, placeholder: 'yyyy/mm/dd', "data-provide" => "datepicker", size: 12 %>
    </div>
    <div class="col-lg-3">
      <label>
        <%= f.check_box :planned_true %>&nbsp;予定
      </label>
      &nbsp;
      <label>
        <%= f.check_box :planned_false %>&nbsp;実績
      </label>
      &nbsp;
      <label>
        <%= f.check_box :monthly_data_true %>&nbsp;定例
      </label>
      <div class="pull-right">
      <%= f.submit "検索", :name => nil %>
      </div>
    </div>
  </div>
<% end %>

<%= form_for @form, as: :q, url: duplicate_monthly_data_casein_receipt_headers_path, method: :post do |f| %>
  <% f.object.attributes.each do |key, value| -%>
    <%= f.hidden_field key %>
  <% end -%>

  <div class="row" style="margin-top: 20px;">
    <div class="col-lg-3">
      <% if @sum_amount -%>
        <div class="well" style="margin-bottom: 0px;">
          金額: <%= number_with_delimiter @sum_amount %> 円
        </div>
      <% end -%>
    </div>
    <div class="col-lg-offset-7 col-lg-2">
      <div class="pull-right">
          <%= f.submit "定例データ一括作成", name: nil, class: 'btn btn-primary', disabled: @receipt_headers.empty? || !@form.valid?(:duplicate_monthly_data), disable_with: "作成中", data: {confirm: "選択中の定例データから次月のデータを作成します。よろしいですか？"} %>
      </div>
    </div>
  </div>

  <%= render :partial => 'casein/receipt_headers/table', :locals => { :receipt_headers => @receipt_headers } %>

<% end %>

<div class="text-center">
  <%= will_paginate @receipt_headers %>
</div>

<%= content_for :sidebar do %>

  <li><%= link_to "#{casein_show_icon "plus-sign"}#{t 'helpers.link.add'} #{ReceiptHeader.model_name.human}".html_safe, new_casein_receipt_header_path %></li>

<% end %>
