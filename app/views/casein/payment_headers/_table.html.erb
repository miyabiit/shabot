<!-- Scaffolding generated by Casein v5.1.1.5 -->
<%= javascript_include_tag 'checkable_table' %>

<br/>

<div class="pull-left">
  <small>◯: 定例、＊: 実績</small>
</div>
<table class="table table-striped table-hover table-condensed">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th><%= casein_sort_link "作成者", :user_id %></th>
      <th><%= casein_sort_link "伝票No", :slip_no %></th>
      <th><%= casein_sort_link "お取引先", :account_id %></th>
      <th><%= casein_sort_link "区分", :payment_type %></th>
      <th><%= casein_sort_link "支払日", :payable_on %></th>
      <th><%= casein_sort_link "金額", :total %></th>
      <th><%= casein_sort_link "事業/プロジェクト", :project_id %></th>
      <th><%= casein_sort_link "摘要・目的・効果", :comment %></th>
      <th nowrap>支払</br>申請</th>
      <th nowrap>支払</br>申請</th>
      <th>&nbsp;</th>
      <th>
        <%= check_box_tag :check_all, id: 'check_all' %>
      </th>
    </tr>
  </thead>
  
  <% payment_headers.each do |payment_header| %>
    <tr id="<%= payment_header.id %>" class="<%= 'success' if payment_header.id.to_s == params[:anchor_id] %>">
      <td><%= casein_table_cell_link (payment_header.monthly_data? ? '◯' : ''), payment_path(payment_header) %></td>
      <td><%= casein_table_cell_link (payment_header.planned ? '' : '＊'), payment_path(payment_header) %></td>
      <td><%= casein_table_cell_link Casein::AdminUser.find(payment_header.user_id).name, payment_path(payment_header) %></td>
      <td><%= casein_table_cell_link payment_header.slip_no, payment_path(payment_header) %></td>
      <td><%= casein_table_cell_link truncate(Account.find(payment_header.account_id).name, :length => 10), payment_path(payment_header) rescue "&nsbp;" %></td>
      <td><%= casein_table_cell_link payment_header.payment_type&.text, payment_path(payment_header) %></td>
      <td><%= casein_table_cell_link payment_header.payable_on, payment_path(payment_header) %></td>
      <td align="right"><%= casein_table_cell_link number_with_delimiter(payment_header.total), payment_path(payment_header) %></td>
      <td><%= casein_table_cell_link Project.find(payment_header.project_id).name_and_category, payment_path(payment_header) %></td>
      <td><%= casein_table_cell_link truncate(payment_header.comment, :length => 15), payment_path(payment_header) %></td>
      <td class="new">
        <%= table_row_add_icon_link_to new_payment_path(payment_header) %>
      </td>
      <td class="new">
        <%= table_row_retweet_icon_link_to new_by_last_payment_path(payment_header) %>
      </td>
      <td class="delete">
        <% unless payment_header.processed? -%>
          <%= table_row_trash_icon_link_to payment_path(payment_header), :method => :delete, :data => { :confirm => t("messages.destroy_confirmation", model_name: payment_header.planned ? '支払予定' : '支払申請書') } %>
        <% end -%>
      </td>
      <td>
        <%= check_box_tag "ids[]", payment_header.id, false, class: 'casein-like', 'data-value-id' => payment_header.id %>
      </td>
    </tr>
  <% end %>
</table>
